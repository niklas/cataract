<div id="header">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <div class="nav-collapse">
          <a href="/" class="brand">Cataract</a>
          {{view Cataract.Spinner}}
        </div>


        <ul class="nav pull-right">
          <li>
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          </li>
        </ul>

        <form class="navbar-search">
          {{view Ember.DelayedTextField delayedValueBinding="Cataract.terms" classNames="search-query" elementId="torrent_search_terms"}}
        </form>

        <ul class="nav">
          <li {{bindAttr class='controllers.torrents.isRecentActive:active'}}>{{#link-to 'filter' 'recent'}}Recent{{/link-to}}</li>
          <li {{bindAttr class='controllers.torrents.isRunningActive:active'}}>{{#link-to 'filter' 'running'}}Running{{/link-to}}</li>
          <li>{{#link-to 'add_torrent'}}Add{{/link-to}}</li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              {{controllers.torrents.describedAge}}
              <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#" {{action "setAge" "month" target=controllers.torrents}}>Month</a></li>
              <li><a href="#" {{action "setAge" "year" target=controllers.torrents}}>Year</a></li>
              <li><a href="#" {{action "setAge" "all" target=controllers.torrents}}>All (slow)</a></li>
            </ul>
          </li>
        </ul>

        <div class="nav-collapse">
          {{view Cataract.SessionView}}
          {{ render 'moves' }}
        </div>


      </div>
      {{view Cataract.FlashListView}}
    </div>
  </div>
</div>

<div id="sidebar">
  {{view Cataract.Pagination controllerBinding="Cataract.torrentsController"}}

  {{ render 'directories' }}

  {{#unless Cataract.online}}
  <br />
  <div class="alert alert-error">{{Cataract.offlineReason}}</div>
  {{/unless}}

</div>


<div id="middle">
  <div id="content">
    <div style="display: none;">breadcrumbs</div>

    <div class="tabbable">
      <ul class="nav nav-tabs disks">
        {{#each controllers.torrents.directories}}
        <li {{bindAttr class=":disk active disk.isMounted:mounted:unmounted"}}>
        {{#link-to 'poly.directory' this class="name"}}
            <i {{bindAttr class="disk.isMounted:icon-hdd:icon-warning-sign"}}></i>
            {{disk.name}}
          {{/link-to}}
        </li>
        {{else}}
          {{#each controllers.disks}}
          <li {{bindAttr class=":disk active isMounted:mounted:unmounted"}}>
          {{#link-to 'disk' this class="name"}}
              <i {{bindAttr class="isMounted:icon-hdd:icon-warning-sign"}}></i>
              {{name}}
            {{/link-to}}
          </li>
          {{/each}}
        {{/each}}
      </ul>

      <div class="tab-content">
        <div class="tab-pane active">
          {{outlet pre}}
          {{ render "torrents" }}
        </div>
      </div>

    </div>
  </div>
  <div id="details">
    {{view Cataract.DropZoneView}}

    {{ outlet }}
  </div>
</div>
