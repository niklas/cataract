<html>
  <head>
    <title><%= @page_title -%> (<%= @controller.controller_name %>)</title>
    <%= all_stylesheets %>
    <%= javascript_include_tag :defaults %>
  </head>
  <body>

    <% js_open_menu = visual_effect(:slideDown, 'actions', :queue => {:position => :front, :scope => :actionmenu, :limit => 2}) %>
    <% js_close_menu = visual_effect(:slideUp, 'actions', :queue => {:position => :end, :scope => :actionmenu, :limit => 2}, :delay => 3) %>
  <div id="header" onmouseover="<%=h js_open_menu %>" onmouseout="<%=h js_close_menu %>">
    <span class="logo"><%= image_tag('cataract', :class => "test") %></span>
	 <div id="actions" style="display:none">
	   <ul>
        <li><%= link_to 'Feeds', {:controller => 'feed'} %></li>
        <%= group_link('running') %>
        <%= group_link('paused') %>
        <li><%= link_to "my settings", :action => 'user_settings' , :controller => 'config'-%></li>
      </ul>
    </div>
  </div>

  <div id="search">

    <%= text_field_tag('search',params[:term], :id => 'search_field', :size => 42, :autocomplete => 'off') %>
    <%= observe_field('search_field',
                      :url => { :action => 'search', :controller => 'torrents', 
                                :tags => (@searched_tags ? @searched_tags.join(','): nil)},
      :frequency => 2.3,
      :with => 'term',
      :loading => update_page do |page|
        page.select('.front_of_search').each { |e| e.remove }
      end
      ) %>

    <div id="reply"><%= flash[:reply] || '' %></div>
    <%= link_to_remote 'fnord', :url => { :action => 'fnord'} if current_user.login == 'niklas' %>

  </div>

  <div id="notice" style="display: none;">
  </div>

  <div id="summary">
    <%= render :partial => '/torrents/summary' %>
  </div>

  <div id="john_cage">
    <div id="content">
      <%= yield  %>
    </div>
  </div>

  <div id="sidebar">
    <%= render :partial => '/layouts/sidebar' %>
  </div>

  </body>
</html>
